{% layout "layout.liquid" %} {% block content %}
<div>
  <article class="show-class">
    <h2>
      {{ post.name }}
    </h2>
    <br />
    <img src="{{ post.imageUrl }}.png" width="200px" /> <br />
    {{ post.title }} <br />
    {% if post.username == username %}
    <a href="/posts/{{ post._id }}/edit"
      ><button class="btn btn-outline-info btn-sm">Edit</button></a
    >
    <form action="/posts/{{ post._id }}?_method=DELETE" method="POST">
      <input type="submit" class="btn btn-outline-info btn-sm" value="Delete" />
    </form>
    {% endif %}
    <form action="/{{ post._id }}/comments?_method=POST" method="POST">
      <label>Comment:</label>
      <textarea name="content"></textarea>
      <input
        type="submit"
        class="btn btn-outline-info btn-sm"
        value="Add Comment"
      />
    </form>
    <br />
    {% for comment in post.comments %} @{{ comment.username }}
    {{ comment.content }} <br />
    {% if comment.username == username %}
    <a href="/{{ post._id }}/{{ comment._id }}/comments/edit"
      ><button class="btn btn-outline-info btn-sm">Edit</button>
    </a>
    {% endif %}

    {% if comment.username == username or post.username == username %}
    <form
      action="/{{ post._id }}/{{ comment._id }}?_method=DELETE"
      method="POST"
    >
      <input type="submit" class="btn btn-outline-info btn-sm" value="Delete" />
      <input type="hidden" value="{{ post._id }}" name="postId" />
    </form>
    <br />
    {% endif %}
    {% endfor %}
    <a href="/posts/"
      ><button class="btn btn-outline-info btn-sm">Homepage</button></a
    >
    <a href="/posts/feed"
      ><button class="btn btn-outline-info btn-sm">Feed</button></a
    >
  </article>
</div>
{% endblock %}
